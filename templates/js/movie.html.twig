{# Pure Bootstrap 5, no Tabler-specific classes #}
<div class="card h-100">
    <div class="card-header d-flex align-items-start justify-content-between gap-3">
        <div class="flex-grow-1 min-w-0">
            <h5 class="mb-1 line-limit-1">
                <a href="https://www.imdb.com/title/{{ hit.imdbId }}" target="_blank" rel="noopener"
                   class="link-underline link-underline-opacity-0 link-underline-opacity-100-hover">
                    {{ hit._highlightResult.title.value|raw }}
                </a>
                {% if hit.releaseYear %}
                    <span class="text-body-secondary">({{ hit.releaseYear }})</span>
                {% endif %}
            </h5>

            {% if hit.tagline %}
                <p class="mb-0 text-body-secondary fst-italic line-limit-1">
                    {{ hit._highlightResult.tagline.value|raw }}
                </p>
            {% endif %}
        </div>

        {% if hit.voteAverage is defined and hit.voteAverage is not null %}
            <span class="badge text-bg-warning d-inline-flex align-items-center gap-1 fs-6">
        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" aria-hidden="true">
          <path fill="currentColor" d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327l4.898.696c.441.062.612.636.282.95l-3.522 3.356l.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
        </svg>
        <span>{{ hit.voteAverage }}/10</span>
      </span>
        {% endif %}
    </div>

    <div class="card-body">
        {% if hit._highlightResult.description %}
            <p class="text-body-secondary mb-3 description-clamp">
                {{ hit._highlightResult.description.value|raw }}
            </p>
        {% endif %}

        <div class="meta-grid mb-3">
            {% if hit.director %}
                <div class="meta-key fw-semibold">Director</div>
                <div class="meta-val">{{ hit.director }}</div>
            {% endif %}

            {% if hit.cast and hit.cast.length > 0 %}
                <div class="meta-key fw-semibold">Cast</div>
                <div class="meta-val">{{ hit.cast.slice(0, 3).join(', ') }}</div>
            {% endif %}
        </div>

        {% if hit.genres and hit.genres.length > 0 %}
            <div class="mb-2">
                {% for genre in hit.genres %}
                    <span class="badge text-bg-primary me-1 mb-1">{{ genre }}</span>
                {% endfor %}
            </div>
        {% endif %}

        {% if hit.keywords and hit.keywords.length > 0 %}
            <div class="d-flex flex-wrap gap-1">
                {% for keyword in hit.keywords %}
                    <span class="badge text-bg-secondary">{{ keyword }}</span>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <div class="card-footer d-flex justify-content-between align-items-center flex-wrap gap-2">
        <div class="d-flex flex-wrap gap-3 text-body-secondary small">
            {% if hit.runtime %}
                <span>{{ hit.runtime }} min</span>
            {% endif %}
            {% if hit.voteCount %}
                <span>{{ hit.voteCount }} votes</span>
            {% endif %}
            {% if hit.budget %}
                <span>${{ (hit.budget / 1000000)|number_format(0) }}M budget</span>
            {% endif %}
        </div>

        <div class="d-flex flex-wrap gap-2 align-items-center">
            {% if hit._rankingScore is defined and hit._rankingScore != 1 %}
                <span class="badge text-bg-light">
          Score: {{ hit._rankingScore|number_format(2) }}
        </span>
            {% endif %}

            <button
                    {{ stimulus_action(globals._sc_modal, 'modal') }}
                    data-hit-id="{{ hit.id }}"
                    class="btn btn-sm btn-outline-primary d-inline-flex align-items-center gap-1">
                {{ ux_icon('json')|raw }}
                <span class="line-limit-1">{{ hit.id }}</span>
            </button>

            <a href="https://www.imdb.com/title/{{ hit.imdbId }}"
               target="_blank" rel="noopener"
               class="btn btn-sm btn-outline-primary">
                IMDb
            </a>
        </div>
    </div>
</div>
